import urllib. request as r  #ref:https://stackoverflow.com
from urllib.parse import urlparse
Tab=[{'woah':'what'}]

#validityOfUrl
def is_url(url):
  try:
    result = urlparse(url)
    return all([result.scheme, result.netloc])
  except ValueError:
    return False

#choice_1_ft
def addTab(Title,Url):
    Tab.append({})
    Tab[len(Tab)-1]['Title']=Title
    Tab[len(Tab)-1]['Url']=Url
    Tab[len(Tab)-1]['Nested']=''
    Tab[len(Tab)-1]['Nested_Url']=''
    return Tab
#choice_2_ft
def closeTab(a):
    if len(Tab)==0:         #cond for len
        print('There is no Tab ~')
    elif len(Tab)==1:       #cond for len
        print(Tab[0],'was removed')
        Tab.remove(Tab[0])
    else:                   #cond for len
        if a in range(len(Tab)-2):      #cond for a inter len cond!
            print(Tab[a],'was removed')
            Tab.remove(Tab[a])
        else:                           #cond for a
            print(Tab[len(Tab)-1],'was removed')
            Tab.remove(Tab[len(Tab)-1])
#choice_3_ft , #ref:https://stackoverflow.com
def displayHtml(b):
    b=int(b)
    page = r. urlopen(Tab[b]['Url'])  #Done?
    print(page. read())

print('''
1. Open Tab
2. Close Tab
3. Switch Tab
4. Display All Tabs
5. Open Nested Tab
6. Clear All Tabs
7. Save Tabs
8. Import Tabs
9. Exit''')
choice=''
while choice !='9':
    choice=input('Enter your choice : ')
    while not choice.isnumeric():
        print('please enter an integer from 1 to 9 :')
    if choice =='1':
        add_Title=input('enter the title you want to add : ')
        url=input('enter an url : ')
        while(is_url(url)==False):
            url=input('please enter a valid url~ : ')
        else:
            addTab(add_Title,url)
    if choice =='2':
        remove_Tab = input('Enter the tab you want to remove by index(start with 0) : ')    #need edit
        closeTab(remove_Tab)
    if choice=='3':
        url_Display=input('Enter the url that you want to display as html : ')
        while  (not url_Display.isnumeric()) or (int(url_Display) >=len(Tab)) :
            url_Display=input('please choose integer between 0 to'+' '+str(len(Tab))+' : ')
        else:
            displayHtml(url_Display)
    if choice=='4':
        if len(Tab)==0:
            print('there is no tab')
        else:
            for i in range(len(Tab)):
                print(Tab[i]['Title'])
                print('    '+str(Tab[i]['Nested']))
    if choice=='5':
        parent_index=input('Enter the index of parent tab : ')
        if len(Tab)==0:
            print('there is no parent tab ')
        else:
            while (not parent_index.isnumeric()) or (int(parent_index)>=len(Tab)):
                parent_index=input('Enter an integer between 0 and '+str(len(Tab)-1)+' : ')
            else:
                parent_index=int(parent_index)
                nested_tab=input('enter a title for the nested tab of '+str(Tab[parent_index]['Title'])) 
    if choice=='6':
        Tab.clear()
        print('all tab was closed')
